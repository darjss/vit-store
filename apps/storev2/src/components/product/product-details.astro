---
import Tabs from "@/components/starwind/tabs/Tabs.astro";
import TabsContent from "@/components/starwind/tabs/TabsContent.astro";
import TabsList from "@/components/starwind/tabs/TabsList.astro";
import TabsTrigger from "@/components/starwind/tabs/TabsTrigger.astro";

interface Props {
	product: {
		description?: string | null;
		ingredients?: string[] | null;
		dailyIntake?: number | null;
		weightGrams?: number | null;
		amount?: string | null;
		potency?: string | null;
	};
}

const { product } = Astro.props;

const hasDescription = !!(
	product.description && product.description.trim().length > 0
);
const hasIngredients = Boolean(
	product.ingredients &&
	Array.isArray(product.ingredients) &&
	product.ingredients.length > 0
);
const hasSpecs = !!(
	product.dailyIntake ||
	product.weightGrams ||
	product.amount ||
	product.potency
);
console.log("ingredeients","has ingredients" ,product.ingredients, hasIngredients, product.ingredients?.length, typeof product.ingredients)
---

<div class="w-full space-y-8">
	<div class="border-t-2 border-border pt-8">
		<h2 class="text-2xl sm:text-3xl font-black mb-6 uppercase tracking-tight">üìã –î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π –º—ç–¥—ç—ç–ª—ç–ª</h2>
	</div>

	<Tabs defaultValue="description" class="w-full">
		<TabsList class="w-full grid grid-cols-4 gap-2 p-2 bg-muted/50 border-2 border-border shadow-hard mb-8">
			<TabsTrigger 
				value="description" 
				class="text-xs sm:text-sm font-black px-2 py-3 sm:px-4 sm:py-3 transition-all uppercase tracking-wide data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-2 data-[state=active]:border-border data-[state=active]:shadow-hard-sm hover:bg-primary/20"
			>
				<span class="block sm:inline">üìù</span>
				<span class="hidden sm:inline ml-2">–¢–∞–π–ª–±–∞—Ä</span>
			</TabsTrigger>
			<TabsTrigger 
				value="usage" 
				class="text-xs sm:text-sm font-black px-2 py-3 sm:px-4 sm:py-3 transition-all uppercase tracking-wide data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-2 data-[state=active]:border-border data-[state=active]:shadow-hard-sm hover:bg-primary/20"
			>
				<span class="block sm:inline">üíä</span>
				<span class="hidden sm:inline ml-2">–•—ç—Ä—ç–≥–ª—ç—ç</span>
			</TabsTrigger>
			<TabsTrigger 
				value="ingredients" 
				class="text-xs sm:text-sm font-black px-2 py-3 sm:px-4 sm:py-3 transition-all uppercase tracking-wide data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-2 data-[state=active]:border-border data-[state=active]:shadow-hard-sm hover:bg-primary/20"
			>
				<span class="block sm:inline">üß™</span>
				<span class="hidden sm:inline ml-2">–ù–∞–π—Ä–ª–∞–≥–∞</span>
			</TabsTrigger>
			<TabsTrigger 
				value="specs" 
				class="text-xs sm:text-sm font-black px-2 py-3 sm:px-4 sm:py-3 transition-all uppercase tracking-wide data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-2 data-[state=active]:border-border data-[state=active]:shadow-hard-sm hover:bg-primary/20"
			>
				<span class="block sm:inline">üìä</span>
				<span class="hidden sm:inline ml-2">“Æ–∑“Ø“Ø–ª—ç–ª—Ç</span>
			</TabsTrigger>
		</TabsList>

		<TabsContent value="description">
			<div class="border-2 border-border bg-background p-6 sm:p-8 shadow-hard min-h-[200px]">
				{hasDescription ? (
					<div class="prose prose-sm sm:prose max-w-none prose-headings:font-black prose-p:text-foreground/80">
						<p class="text-sm sm:text-base leading-relaxed font-medium whitespace-pre-line">
							{product.description}
						</p>
					</div>
				) : (
					<div class="flex flex-col items-center justify-center py-16 text-center">
						<div class="text-5xl mb-4 opacity-20">üìù</div>
						<p class="text-base sm:text-lg text-muted-foreground font-bold uppercase tracking-wide">
							–¢–∞–π–ª–±–∞—Ä –æ–¥–æ–æ–≥–æ–æ—Ä –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞
						</p>
					</div>
				)}
			</div>
		</TabsContent>

		<TabsContent value="usage">
			<div class="border-2 border-border bg-background p-6 sm:p-8 shadow-hard">
				<div class="space-y-8">
					<div class="space-y-4">
						<h3 class="text-lg sm:text-xl font-black flex items-center gap-3 uppercase">
							<span>üíä</span>
							<span>–¢—É–Ω –±–æ–ª–æ–Ω —Ö—ç—Ä—ç–≥–ª—ç—Ö –∞—Ä–≥–∞</span>
						</h3>
						<div class="border-2 border-border bg-muted/30 p-6">
							{product.dailyIntake ? (
								<div class="space-y-2">
									<p class="text-sm sm:text-base font-bold uppercase tracking-wide">
										”®–¥”©—Ä—Ç: <span class="text-xl font-black text-primary">{product.dailyIntake}</span> —à–∏—Ä—Ö—ç–≥
									</p>
									<p class="text-xs sm:text-sm text-muted-foreground font-medium">
										–•–æ–æ–ª–Ω—ã –¥–∞—Ä–∞–∞ —É—Å–∞–∞—Ä —Ö–∞–º—Ç —É—É—Ö
									</p>
								</div>
							) : (
								<p class="text-sm text-muted-foreground font-medium">
									–ë–∞–≥—Ü—ã–Ω –∑–∞–∞–≤–∞—Ä —ç—Å–≤—ç–ª —ç–º—á–∏–π–Ω –∑–∞–∞–≤–∞—Ä—á–∏–ª–≥–∞–∞–≥ –¥–∞–≥–∞–Ω–∞ —É—É
								</p>
							)}
						</div>
					</div>

					<div class="space-y-4">
						<h3 class="text-lg sm:text-xl font-black flex items-center gap-3 uppercase">
							<span>‚è∞</span>
							<span>–•—ç–∑—ç—ç —É—É—Ö –≤—ç?</span>
						</h3>
						<div class="grid gap-4 sm:grid-cols-2">
							<div class="flex items-start gap-4 p-4 border-2 border-border bg-background hover:shadow-hard-sm transition-shadow">
								<span class="text-3xl">üåÖ</span>
								<div>
									<div class="font-black text-sm sm:text-base uppercase">”®–≥–ª”©”©</div>
									<div class="text-xs sm:text-sm text-muted-foreground font-medium">”®–≥–ª”©”©–Ω–∏–π —Ü–∞–π–Ω—ã –¥–∞—Ä–∞–∞</div>
								</div>
							</div>
							<div class="flex items-start gap-4 p-4 border-2 border-border bg-background hover:shadow-hard-sm transition-shadow">
								<span class="text-3xl">üåÉ</span>
								<div>
									<div class="font-black text-sm sm:text-base uppercase">–û—Ä–æ–π</div>
									<div class="text-xs sm:text-sm text-muted-foreground font-medium">–û—Ä–æ–π–Ω —Ö–æ–æ–ª–Ω—ã –¥–∞—Ä–∞–∞</div>
								</div>
							</div>
						</div>
					</div>

					<div class="border-2 border-border bg-yellow-50 p-6">
						<h4 class="font-black text-sm sm:text-base mb-4 flex items-center gap-2 uppercase text-yellow-900">
							<span>‚ö†Ô∏è</span>
							<span>–ê–Ω—Ö–∞–∞—Ä–∞—Ö –∑“Ø–π–ª—Å</span>
						</h4>
						<ul class="space-y-3 text-xs sm:text-sm text-yellow-900/80 font-medium">
							<li class="flex gap-3">
								<span class="font-bold">‚Ä¢</span>
								<span>–ó–∞–∞–≤—Ä—ã–Ω –¥–∞–≥—É—É —Ö—ç—Ä—ç–≥–ª—ç–Ω—ç “Ø“Ø</span>
							</li>
							<li class="flex gap-3">
								<span class="font-bold">‚Ä¢</span>
								<span>–ñ–∏—Ä—ç–º—Å—ç–Ω, —Ö”©—Ö“Ø“Ø–ª —ç—Ö —ç–º—á—Ç—ç–π –∑”©–≤–ª”©–ª–¥”©–Ω”© “Ø“Ø</span>
							</li>
							<li class="flex gap-3">
								<span class="font-bold">‚Ä¢</span>
								<span>–•–∞–¥–≥–∞–ª–∞—Ö: –°—ç—Ä“Ø“Ø–Ω, —Ö—É—É—Ä–∞–π –≥–∞–∑–∞—Ä—Ç</span>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</TabsContent>

		<TabsContent value="ingredients">
			<div class="border-2 border-border bg-background p-6 sm:p-8 shadow-hard min-h-[200px]">
				{hasIngredients ? (
					<div class="space-y-6">
						<h3 class="text-lg sm:text-xl font-black mb-4 uppercase">–ò–¥—ç–≤—Ö—Ç—ç–π –Ω–∞–π—Ä–ª–∞–≥–∞</h3>
						<ul class="grid gap-3 sm:grid-cols-2">
							{product.ingredients?.map((ingredient) => (
								<li class="flex items-center gap-3 p-4 border-2 border-border bg-muted/20 hover:bg-muted/40 transition-colors">
									<span class="text-lg text-primary">‚úì</span>
									<span class="text-sm sm:text-base font-bold uppercase tracking-wide">{ingredient}</span>
								</li>
							))}
						</ul>
					</div>
				) : (
					<div class="flex flex-col items-center justify-center py-16 text-center">
						<div class="text-5xl mb-4 opacity-20">üß™</div>
						<p class="text-sm sm:text-base text-muted-foreground font-bold uppercase tracking-wide">
							–ù–∞–π—Ä–ª–∞–≥—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª –æ–¥–æ–æ–≥–æ–æ—Ä –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞
						</p>
					</div>
				)}
			</div>
		</TabsContent>

		<TabsContent value="specs">
			<div class="border-2 border-border bg-background p-6 sm:p-8 shadow-hard min-h-[200px]">
				{hasSpecs ? (
					<div class="space-y-6">
						<h3 class="text-lg sm:text-xl font-black mb-4 uppercase">–¢–µ—Ö–Ω–∏–∫–∏–π–Ω “Ø–∑“Ø“Ø–ª—ç–ª—Ç</h3>
						<div class="grid gap-4 sm:grid-cols-2">
							{product.amount && (
								<div class="flex items-center justify-between p-4 border-2 border-border bg-muted/20">
									<span class="text-sm sm:text-base font-bold text-muted-foreground uppercase">‚öñÔ∏è –¢–æ–æ —à–∏—Ä—Ö—ç–≥</span>
									<span class="text-base sm:text-lg font-black">{product.amount}</span>
								</div>
							)}
							{product.potency && (
								<div class="flex items-center justify-between p-4 border-2 border-border bg-muted/20">
									<span class="text-sm sm:text-base font-bold text-muted-foreground uppercase">üí™ –ò–¥—ç–≤—Ö—Ç—ç–π –±–æ–¥–∏—Å</span>
									<span class="text-base sm:text-lg font-black">{product.potency}</span>
								</div>
							)}
							{product.dailyIntake && (
								<div class="flex items-center justify-between p-4 border-2 border-border bg-muted/20">
									<span class="text-sm sm:text-base font-bold text-muted-foreground uppercase">üìÖ ”®–¥—Ä–∏–π–Ω —Ç—É–Ω</span>
									<span class="text-base sm:text-lg font-black">{product.dailyIntake} —à–∏—Ä—Ö—ç–≥</span>
								</div>
							)}
							{product.weightGrams && (
								<div class="flex items-center justify-between p-4 border-2 border-border bg-muted/20">
									<span class="text-sm sm:text-base font-bold text-muted-foreground uppercase">‚öñÔ∏è –ñ–∏–Ω</span>
									<span class="text-base sm:text-lg font-black">{product.weightGrams}–≥</span>
								</div>
							)}
						</div>
					</div>
				) : (
					<div class="flex flex-col items-center justify-center py-16 text-center">
						<div class="text-5xl mb-4 opacity-20">üìä</div>
						<p class="text-sm sm:text-base text-muted-foreground font-bold uppercase tracking-wide">
							–¢–µ—Ö–Ω–∏–∫–∏–π–Ω “Ø–∑“Ø“Ø–ª—ç–ª—Ç –æ–¥–æ–æ–≥–æ–æ—Ä –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞
						</p>
					</div>
				)}
			</div>
		</TabsContent>
	</Tabs>

	{/* Disclaimer */}
	<div class="border-2 border-border bg-destructive/10 p-6 shadow-hard-sm">
		<p class="text-xs sm:text-sm font-bold text-center text-destructive flex items-center justify-center gap-3 flex-wrap uppercase tracking-wide">
			<span class="text-lg">‚ö†Ô∏è</span>
			<span>–≠–º–Ω—ç–ª–≥–∏–π–Ω –∑”©–≤–ª”©–≥”©”© –±–∏—à. –ú—ç—Ä–≥—ç–∂–ª–∏–π–Ω —ç–º—á–∏–¥ —Ö–∞–Ω–¥–∞–Ω–∞ —É—É.</span>
		</p>
	</div>
</div>
