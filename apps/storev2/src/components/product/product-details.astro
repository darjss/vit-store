---
import Tabs from "@/components/starwind/tabs/Tabs.astro";
import TabsList from "@/components/starwind/tabs/TabsList.astro";
import TabsTrigger from "@/components/starwind/tabs/TabsTrigger.astro";
import TabsContent from "@/components/starwind/tabs/TabsContent.astro";

interface Props {
	product: {
		description?: string | null;
		ingredients?: string[] | null;
		dailyIntake?: number | null;
		weightGrams?: number | null;
		amount?: string | null;
		potency?: string | null;
	};
}

const { product } = Astro.props;

const hasDescription = !!(
	product.description && product.description.trim().length > 0
);
const hasIngredients = !!(
	product.ingredients &&
	Array.isArray(product.ingredients) &&
	product.ingredients.length > 0
);
const hasSpecs = !!(
	product.dailyIntake ||
	product.weightGrams ||
	product.amount ||
	product.potency
);
---

<div class="w-full space-y-6">
	{/* Section Heading */}
	<div class="border-t-4 border-black pt-6">
		<h2 class="text-2xl sm:text-3xl font-black mb-4">üìã –î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π –º—ç–¥—ç—ç–ª—ç–ª</h2>
	</div>

	<Tabs defaultValue="description" class="w-full">
		{/* Tabs Navigation */}
		<TabsList class="w-full grid grid-cols-4 gap-2 p-2 bg-muted/50 border-3 border-black rounded-sm shadow-[4px_4px_0_0_#000] mb-6">
			<TabsTrigger 
				value="description" 
				class="text-xs sm:text-base font-black px-2 py-3 sm:px-4 sm:py-3 rounded-sm transition-all data-[state=active]:bg-primary data-[state=active]:border-2 data-[state=active]:border-black data-[state=active]:shadow-[2px_2px_0_0_#000] hover:bg-primary/30"
			>
				<span class="block sm:inline">üìù</span>
				<span class="hidden sm:inline ml-1">–¢–∞–π–ª–±–∞—Ä</span>
			</TabsTrigger>
			<TabsTrigger 
				value="usage" 
				class="text-xs sm:text-base font-black px-2 py-3 sm:px-4 sm:py-3 rounded-sm transition-all data-[state=active]:bg-primary data-[state=active]:border-2 data-[state=active]:border-black data-[state=active]:shadow-[2px_2px_0_0_#000] hover:bg-primary/30"
			>
				<span class="block sm:inline">üíä</span>
				<span class="hidden sm:inline ml-1">–•—ç—Ä—ç–≥–ª—ç—ç</span>
			</TabsTrigger>
			<TabsTrigger 
				value="ingredients" 
				class="text-xs sm:text-base font-black px-2 py-3 sm:px-4 sm:py-3 rounded-sm transition-all data-[state=active]:bg-primary data-[state=active]:border-2 data-[state=active]:border-black data-[state=active]:shadow-[2px_2px_0_0_#000] hover:bg-primary/30"
			>
				<span class="block sm:inline">üß™</span>
				<span class="hidden sm:inline ml-1">–ù–∞–π—Ä–ª–∞–≥–∞</span>
			</TabsTrigger>
			<TabsTrigger 
				value="specs" 
				class="text-xs sm:text-base font-black px-2 py-3 sm:px-4 sm:py-3 rounded-sm transition-all data-[state=active]:bg-primary data-[state=active]:border-2 data-[state=active]:border-black data-[state=active]:shadow-[2px_2px_0_0_#000] hover:bg-primary/30"
			>
				<span class="block sm:inline">üìä</span>
				<span class="hidden sm:inline ml-1">“Æ–∑“Ø“Ø–ª—ç–ª—Ç</span>
			</TabsTrigger>
		</TabsList>

		{/* Description Tab */}
		<TabsContent value="description">
			<div class="rounded-sm border-3 border-black bg-white p-5 sm:p-7 shadow-[4px_4px_0_0_#000] min-h-[200px]">
				{hasDescription ? (
					<div class="prose prose-sm sm:prose max-w-none">
						<p class="text-sm sm:text-base leading-relaxed text-black font-normal whitespace-pre-line">
							{product.description}
						</p>
					</div>
				) : (
					<div class="flex flex-col items-center justify-center py-16 text-center">
						<div class="text-5xl mb-4">üìù</div>
						<p class="text-base sm:text-lg text-black/60 font-bold">
							–¢–∞–π–ª–±–∞—Ä –æ–¥–æ–æ–≥–æ–æ—Ä –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞
						</p>
					</div>
				)}
			</div>
		</TabsContent>

		{/* Usage / How to Consume Tab */}
		<TabsContent value="usage">
			<div class="rounded-sm border-3 border-black bg-white p-4 sm:p-6 shadow-[4px_4px_0_0_#000]">
				<div class="space-y-6">
					{/* Dosage Section */}
					<div class="space-y-3">
						<h3 class="text-lg sm:text-xl font-black flex items-center gap-2">
							<span>üíä</span>
							<span>–¢—É–Ω –±–æ–ª–æ–Ω —Ö—ç—Ä—ç–≥–ª—ç—Ö –∞—Ä–≥–∞</span>
						</h3>
						<div class="rounded-sm border-2 border-black bg-primary/10 p-4">
							{product.dailyIntake ? (
								<div class="space-y-2">
									<p class="text-sm sm:text-base font-bold">
										”®–¥”©—Ä—Ç: <span class="text-lg font-black text-primary">{product.dailyIntake}</span> —à–∏—Ä—Ö—ç–≥
									</p>
									<p class="text-xs sm:text-sm text-black/70">
										–•–æ–æ–ª–Ω—ã –¥–∞—Ä–∞–∞ —É—Å–∞–∞—Ä —Ö–∞–º—Ç —É—É—Ö
									</p>
								</div>
							) : (
								<p class="text-sm text-black/60">
									–ë–∞–≥—Ü—ã–Ω –∑–∞–∞–≤–∞—Ä —ç—Å–≤—ç–ª —ç–º—á–∏–π–Ω –∑–∞–∞–≤–∞—Ä—á–∏–ª–≥–∞–∞–≥ –¥–∞–≥–∞–Ω–∞ —É—É
								</p>
							)}
						</div>
					</div>

					{/* Best Time Section */}
					<div class="space-y-3">
						<h3 class="text-lg sm:text-xl font-black flex items-center gap-2">
							<span>‚è∞</span>
							<span>–•—ç–∑—ç—ç —É—É—Ö –≤—ç?</span>
						</h3>
						<div class="grid gap-3">
							<div class="flex items-start gap-3 p-3 rounded-sm border-2 border-black bg-white">
								<span class="text-2xl">üåÖ</span>
								<div>
									<div class="font-bold text-sm sm:text-base">”®–≥–ª”©”©</div>
									<div class="text-xs sm:text-sm text-black/70">”®–≥–ª”©”©–Ω–∏–π —Ü–∞–π–Ω—ã –¥–∞—Ä–∞–∞</div>
								</div>
							</div>
							<div class="flex items-start gap-3 p-3 rounded-sm border-2 border-black bg-white">
								<span class="text-2xl">üåÉ</span>
								<div>
									<div class="font-bold text-sm sm:text-base">–û—Ä–æ–π</div>
									<div class="text-xs sm:text-sm text-black/70">–û—Ä–æ–π–Ω —Ö–æ–æ–ª–Ω—ã –¥–∞—Ä–∞–∞</div>
								</div>
							</div>
						</div>
					</div>

					{/* Important Notes */}
					<div class="rounded-sm border-2 border-black bg-yellow-100 p-4">
						<h4 class="font-black text-sm sm:text-base mb-2 flex items-center gap-2">
							<span>‚ö†Ô∏è</span>
							<span>–ê–Ω—Ö–∞–∞—Ä–∞—Ö –∑“Ø–π–ª—Å</span>
						</h4>
						<ul class="space-y-2 text-xs sm:text-sm text-black/80">
							<li class="flex gap-2">
								<span>‚Ä¢</span>
								<span>–ó–∞–∞–≤—Ä—ã–Ω –¥–∞–≥—É—É —Ö—ç—Ä—ç–≥–ª—ç–Ω—ç “Ø“Ø</span>
							</li>
							<li class="flex gap-2">
								<span>‚Ä¢</span>
								<span>–ñ–∏—Ä—ç–º—Å—ç–Ω, —Ö”©—Ö“Ø“Ø–ª —ç—Ö —ç–º—á—Ç—ç–π –∑”©–≤–ª”©–ª–¥”©–Ω”© “Ø“Ø</span>
							</li>
							<li class="flex gap-2">
								<span>‚Ä¢</span>
								<span>–•–∞–¥–≥–∞–ª–∞—Ö: –°—ç—Ä“Ø“Ø–Ω, —Ö—É—É—Ä–∞–π –≥–∞–∑–∞—Ä—Ç</span>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</TabsContent>

		{/* Ingredients Tab */}
		<TabsContent value="ingredients">
			<div class="rounded-sm border-3 border-black bg-white p-4 sm:p-6 shadow-[4px_4px_0_0_#000] min-h-[200px]">
				{hasIngredients ? (
					<div class="space-y-4">
						<h3 class="text-lg sm:text-xl font-black mb-4">–ò–¥—ç–≤—Ö—Ç—ç–π –Ω–∞–π—Ä–ª–∞–≥–∞</h3>
						<ul class="grid gap-2">
							{product.ingredients!.map((ingredient) => (
								<li class="flex items-center gap-3 p-3 rounded-sm border-2 border-black bg-muted/30">
									<span class="text-lg">‚úì</span>
									<span class="text-sm sm:text-base font-semibold">{ingredient}</span>
								</li>
							))}
						</ul>
					</div>
				) : (
					<div class="flex flex-col items-center justify-center py-12 text-center">
						<div class="text-4xl mb-3">üß™</div>
						<p class="text-sm sm:text-base text-black/60 font-semibold">
							–ù–∞–π—Ä–ª–∞–≥—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª –æ–¥–æ–æ–≥–æ–æ—Ä –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞
						</p>
					</div>
				)}
			</div>
		</TabsContent>

		{/* Specifications Tab */}
		<TabsContent value="specs">
			<div class="rounded-sm border-3 border-black bg-white p-4 sm:p-6 shadow-[4px_4px_0_0_#000] min-h-[200px]">
				{hasSpecs ? (
					<div class="space-y-4">
						<h3 class="text-lg sm:text-xl font-black mb-4">–¢–µ—Ö–Ω–∏–∫–∏–π–Ω “Ø–∑“Ø“Ø–ª—ç–ª—Ç</h3>
						<div class="grid gap-3">
							{product.amount && (
								<div class="flex items-center justify-between p-4 rounded-sm border-2 border-black bg-muted/30">
									<span class="text-sm sm:text-base font-bold text-black/70">‚öñÔ∏è –¢–æ–æ —à–∏—Ä—Ö—ç–≥</span>
									<span class="text-base sm:text-lg font-black">{product.amount}</span>
								</div>
							)}
							{product.potency && (
								<div class="flex items-center justify-between p-4 rounded-sm border-2 border-black bg-muted/30">
									<span class="text-sm sm:text-base font-bold text-black/70">üí™ –ò–¥—ç–≤—Ö—Ç—ç–π –±–æ–¥–∏—Å</span>
									<span class="text-base sm:text-lg font-black">{product.potency}</span>
								</div>
							)}
							{product.dailyIntake && (
								<div class="flex items-center justify-between p-4 rounded-sm border-2 border-black bg-muted/30">
									<span class="text-sm sm:text-base font-bold text-black/70">üìÖ ”®–¥—Ä–∏–π–Ω —Ç—É–Ω</span>
									<span class="text-base sm:text-lg font-black">{product.dailyIntake} —à–∏—Ä—Ö—ç–≥</span>
								</div>
							)}
							{product.weightGrams && (
								<div class="flex items-center justify-between p-4 rounded-sm border-2 border-black bg-muted/30">
									<span class="text-sm sm:text-base font-bold text-black/70">‚öñÔ∏è –ñ–∏–Ω</span>
									<span class="text-base sm:text-lg font-black">{product.weightGrams}–≥</span>
								</div>
							)}
						</div>
					</div>
				) : (
					<div class="flex flex-col items-center justify-center py-12 text-center">
						<div class="text-4xl mb-3">üìä</div>
						<p class="text-sm sm:text-base text-black/60 font-semibold">
							–¢–µ—Ö–Ω–∏–∫–∏–π–Ω “Ø–∑“Ø“Ø–ª—ç–ª—Ç –æ–¥–æ–æ–≥–æ–æ—Ä –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞
						</p>
					</div>
				)}
			</div>
		</TabsContent>
	</Tabs>

	{/* Disclaimer */}
	<div class="rounded-sm border-3 border-black bg-red-50 p-4 sm:p-6 shadow-[4px_4px_0_0_#000]">
		<p class="text-xs sm:text-sm font-bold text-center text-red-900 flex items-center justify-center gap-2 flex-wrap">
			<span class="text-base">‚ö†Ô∏è</span>
			<span>–≠–º–Ω—ç–ª–≥–∏–π–Ω –∑”©–≤–ª”©–≥”©”© –±–∏—à. –ú—ç—Ä–≥—ç–∂–ª–∏–π–Ω —ç–º—á–∏–¥ —Ö–∞–Ω–¥–∞–Ω–∞ —É—É.</span>
		</p>
	</div>
</div>
