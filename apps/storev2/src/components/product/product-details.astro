---







import Tabs from "@/components/starwind/tabs/Tabs.astro";
import TabsContent from "@/components/starwind/tabs/TabsContent.astro";
import TabsList from "@/components/starwind/tabs/TabsList.astro";
import TabsTrigger from "@/components/starwind/tabs/TabsTrigger.astro";
import IconAlertTriangle from "~icons/ri/alert-line";
import IconBarChart from "~icons/ri/bar-chart-line";
import IconCalendar from "~icons/ri/calendar-line";
import IconCapsule from "~icons/ri/capsule-line";
import IconCheck from "~icons/ri/check-line";
// Icons for tabs
import IconClipboard from "~icons/ri/clipboard-line";
import IconFileText from "~icons/ri/file-text-line";
import IconStrong from "~icons/ri/heart-pulse-line";
import IconMoon from "~icons/ri/moon-line";
import IconScale from "~icons/ri/scales-line";
import IconSunrise from "~icons/ri/sun-line";
import IconTestTube from "~icons/ri/test-tube-line";
import IconTime from "~icons/ri/time-line";

interface Props {
	product: {
		description?: string | null;
		ingredients?: string[] | null;
		dailyIntake?: number | null;
		weightGrams?: number | null;
		amount?: string | null;
		potency?: string | null;
	};
}

const { product } = Astro.props;

const hasDescription = !!(
	product.description && product.description.trim().length > 0
);
const hasIngredients = Boolean(
	product.ingredients &&
	Array.isArray(product.ingredients) &&
	product.ingredients.length > 0
);
const hasSpecs = !!(
	product.dailyIntake ||
	product.weightGrams ||
	product.amount ||
	product.potency
);
console.log("ingredeients","has ingredients" ,product.ingredients, hasIngredients, product.ingredients?.length, typeof product.ingredients)
---

<div class="w-full space-y-8">
	<div class="border-t-2 border-border pt-8">
		<h2 class="text-2xl sm:text-3xl font-black mb-6 uppercase tracking-tight flex items-center gap-2"><IconClipboard class="h-7 w-7" /> Дэлгэрэнгүй мэдээлэл</h2>
	</div>

	<Tabs defaultValue="description" class="w-full">
		<TabsList class="w-full grid grid-cols-4 gap-2 p-2 bg-muted/50 border-2 border-border shadow-hard mb-8">
			<TabsTrigger 
				value="description" 
				class="text-xs sm:text-sm font-black px-2 py-3 sm:px-4 sm:py-3 transition-all uppercase tracking-wide data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-2 data-[state=active]:border-border data-[state=active]:shadow-hard-sm hover:bg-primary/20"
			>
				<span class="block sm:inline"><IconFileText class="h-4 w-4" /></span>
				<span class="hidden sm:inline ml-2">Тайлбар</span>
			</TabsTrigger>
			<TabsTrigger 
				value="usage" 
				class="text-xs sm:text-sm font-black px-2 py-3 sm:px-4 sm:py-3 transition-all uppercase tracking-wide data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-2 data-[state=active]:border-border data-[state=active]:shadow-hard-sm hover:bg-primary/20"
			>
				<span class="block sm:inline"><IconCapsule class="h-4 w-4" /></span>
				<span class="hidden sm:inline ml-2">Хэрэглээ</span>
			</TabsTrigger>
			<TabsTrigger 
				value="ingredients" 
				class="text-xs sm:text-sm font-black px-2 py-3 sm:px-4 sm:py-3 transition-all uppercase tracking-wide data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-2 data-[state=active]:border-border data-[state=active]:shadow-hard-sm hover:bg-primary/20"
			>
				<span class="block sm:inline"><IconTestTube class="h-4 w-4" /></span>
				<span class="hidden sm:inline ml-2">Найрлага</span>
			</TabsTrigger>
			<TabsTrigger 
				value="specs" 
				class="text-xs sm:text-sm font-black px-2 py-3 sm:px-4 sm:py-3 transition-all uppercase tracking-wide data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-2 data-[state=active]:border-border data-[state=active]:shadow-hard-sm hover:bg-primary/20"
			>
				<span class="block sm:inline"><IconBarChart class="h-4 w-4" /></span>
				<span class="hidden sm:inline ml-2">Үзүүлэлт</span>
			</TabsTrigger>
		</TabsList>

		<TabsContent value="description">
			<div class="border-2 border-border bg-background p-6 sm:p-8 shadow-hard min-h-[200px]">
				{hasDescription ? (
					<div class="prose prose-sm sm:prose max-w-none prose-headings:font-black prose-p:text-foreground/80">
						<p class="text-sm sm:text-base leading-relaxed font-medium whitespace-pre-line">
							{product.description}
						</p>
					</div>
				) : (
					<div class="flex flex-col items-center justify-center py-16 text-center">
						<div class="text-5xl mb-4 opacity-20"><IconFileText class="h-12 w-12" /></div>
						<p class="text-base sm:text-lg text-muted-foreground font-bold uppercase tracking-wide">
							Тайлбар одоогоор байхгүй байна
						</p>
					</div>
				)}
			</div>
		</TabsContent>

		<TabsContent value="usage">
			<div class="border-2 border-border bg-background p-6 sm:p-8 shadow-hard">
				<div class="space-y-8">
					<div class="space-y-4">
						<h3 class="text-lg sm:text-xl font-black flex items-center gap-3 uppercase">
							<IconCapsule class="h-5 w-5" />
							<span>Тун болон хэрэглэх арга</span>
						</h3>
						<div class="border-2 border-border bg-muted/30 p-6">
							{product.dailyIntake ? (
								<div class="space-y-2">
									<p class="text-sm sm:text-base font-bold uppercase tracking-wide">
										Өдөрт: <span class="text-xl font-black text-primary">{product.dailyIntake}</span> ширхэг
									</p>
									<p class="text-xs sm:text-sm text-muted-foreground font-medium">
										Хоолны дараа усаар хамт уух
									</p>
								</div>
							) : (
								<p class="text-sm text-muted-foreground font-medium">
									Багцын заавар эсвэл эмчийн зааварчилгааг дагана уу
								</p>
							)}
						</div>
					</div>

					<div class="space-y-4">
						<h3 class="text-lg sm:text-xl font-black flex items-center gap-3 uppercase">
							<IconTime class="h-5 w-5" />
							<span>Хэзээ уух вэ?</span>
						</h3>
						<div class="grid gap-4 sm:grid-cols-2">
							<div class="flex items-start gap-4 p-4 border-2 border-border bg-background hover:shadow-hard-sm transition-shadow">
								<IconSunrise class="h-8 w-8 text-primary" />
								<div>
									<div class="font-black text-sm sm:text-base uppercase">Өглөө</div>
									<div class="text-xs sm:text-sm text-muted-foreground font-medium">Өглөөний цайны дараа</div>
								</div>
							</div>
							<div class="flex items-start gap-4 p-4 border-2 border-border bg-background hover:shadow-hard-sm transition-shadow">
								<IconMoon class="h-8 w-8 text-primary" />
								<div>
									<div class="font-black text-sm sm:text-base uppercase">Орой</div>
									<div class="text-xs sm:text-sm text-muted-foreground font-medium">Оройн хоолны дараа</div>
								</div>
							</div>
						</div>
					</div>

					<div class="border-2 border-border bg-yellow-50 p-6">
						<h4 class="font-black text-sm sm:text-base mb-4 flex items-center gap-2 uppercase text-yellow-900">
							<IconAlertTriangle class="h-5 w-5" />
							<span>Анхаарах зүйлс</span>
						</h4>
						<ul class="space-y-3 text-xs sm:text-sm text-yellow-900/80 font-medium">
							<li class="flex gap-3">
								<span class="font-bold">•</span>
								<span>Зааврын дагуу хэрэглэнэ үү</span>
							</li>
							<li class="flex gap-3">
								<span class="font-bold">•</span>
								<span>Жирэмсэн, хөхүүл эх эмчтэй зөвлөлдөнө үү</span>
							</li>
							<li class="flex gap-3">
								<span class="font-bold">•</span>
								<span>Хадгалах: Сэрүүн, хуурай газарт</span>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</TabsContent>

		<TabsContent value="ingredients">
			<div class="border-2 border-border bg-background p-6 sm:p-8 shadow-hard min-h-[200px]">
				{hasIngredients ? (
					<div class="space-y-6">
						<h3 class="text-lg sm:text-xl font-black mb-4 uppercase">Идэвхтэй найрлага</h3>
						<ul class="grid gap-3 sm:grid-cols-2">
							{product.ingredients?.map((ingredient) => (
								<li class="flex items-center gap-3 p-4 border-2 border-border bg-muted/20 hover:bg-muted/40 transition-colors">
									<IconCheck class="h-5 w-5 text-primary" />
									<span class="text-sm sm:text-base font-bold uppercase tracking-wide">{ingredient}</span>
								</li>
							))}
						</ul>
					</div>
				) : (
					<div class="flex flex-col items-center justify-center py-16 text-center">
						<div class="text-5xl mb-4 opacity-20"><IconTestTube class="h-12 w-12" /></div>
						<p class="text-sm sm:text-base text-muted-foreground font-bold uppercase tracking-wide">
							Найрлагын мэдээлэл одоогоор байхгүй байна
						</p>
					</div>
				)}
			</div>
		</TabsContent>

		<TabsContent value="specs">
			<div class="border-2 border-border bg-background p-6 sm:p-8 shadow-hard min-h-[200px]">
				{hasSpecs ? (
					<div class="space-y-6">
						<h3 class="text-lg sm:text-xl font-black mb-4 uppercase">Техникийн үзүүлэлт</h3>
						<div class="grid gap-4 sm:grid-cols-2">
							{product.amount && (
								<div class="flex items-center justify-between p-4 border-2 border-border bg-muted/20">
									<span class="text-sm sm:text-base font-bold text-muted-foreground uppercase flex items-center gap-2"><IconScale class="h-4 w-4" /> Тоо ширхэг</span>
									<span class="text-base sm:text-lg font-black">{product.amount}</span>
								</div>
							)}
							{product.potency && (
								<div class="flex items-center justify-between p-4 border-2 border-border bg-muted/20">
									<span class="text-sm sm:text-base font-bold text-muted-foreground uppercase flex items-center gap-2"><IconStrong class="h-4 w-4" /> Идэвхтэй бодис</span>
									<span class="text-base sm:text-lg font-black">{product.potency}</span>
								</div>
							)}
							{product.dailyIntake && (
								<div class="flex items-center justify-between p-4 border-2 border-border bg-muted/20">
									<span class="text-sm sm:text-base font-bold text-muted-foreground uppercase flex items-center gap-2"><IconCalendar class="h-4 w-4" /> Өдрийн тун</span>
									<span class="text-base sm:text-lg font-black">{product.dailyIntake} ширхэг</span>
								</div>
							)}
							{product.weightGrams && (
								<div class="flex items-center justify-between p-4 border-2 border-border bg-muted/20">
									<span class="text-sm sm:text-base font-bold text-muted-foreground uppercase flex items-center gap-2"><IconScale class="h-4 w-4" /> Жин</span>
									<span class="text-base sm:text-lg font-black">{product.weightGrams}г</span>
								</div>
							)}
						</div>
					</div>
				) : (
					<div class="flex flex-col items-center justify-center py-16 text-center">
						<div class="text-5xl mb-4 opacity-20"><IconBarChart class="h-12 w-12" /></div>
						<p class="text-sm sm:text-base text-muted-foreground font-bold uppercase tracking-wide">
							Техникийн үзүүлэлт одоогоор байхгүй байна
						</p>
					</div>
				)}
			</div>
		</TabsContent>
	</Tabs>

	{/* Disclaimer */}
	<div class="border-2 border-border bg-destructive/10 p-6 shadow-hard-sm">
		<p class="text-xs sm:text-sm font-bold text-center text-destructive flex items-center justify-center gap-3 flex-wrap uppercase tracking-wide">
			<IconAlertTriangle class="h-5 w-5" />
			<span>Эмнэлгийн зөвлөгөө биш. Мэргэжлийн эмчид хандана уу.</span>
		</p>
	</div>
</div>
