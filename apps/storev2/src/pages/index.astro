---
export const prerender = false;

import BenefitsSection from "@/components/home/BenefitsSection.astro";
import CategoryGrid from "@/components/home/CategoryGrid.astro";
import CTASection from "@/components/home/CTASection.astro";
import Hero from "@/components/home/Hero.astro";
import ProductSection from "@/components/home/ProductSection.astro";
import Layout from "@/layouts/Layout.astro";

import { api } from "@/lib/trpc";


const products = await api.product.getProductsForHome.query();
console.log("🔴 products", products);
const { featuredProducts, newProducts, discountedProducts } = products;

---

<Layout>
    <Hero />

    <ProductSection
        title="Онцлох бүтээгдэхүүн"
        subtitle="Манай шилдэг сонголтууд"
        products={featuredProducts}
        filterLink="filter=featured"
        badgeStyle="featured"
    />

    <ProductSection
        title="Шинэ ирсэн бүтээгдэхүүн"
        subtitle="Саяхан нэмэгдсэн"
        products={newProducts}
        filterLink="filter=recent"
        badgeStyle="new"
        bgClass="bg-muted/30"
    />

    <ProductSection
        title="Хөнгөлөлттэй бүтээгдэхүүн"
        subtitle="Тусгай үнийн саналууд"
        products={discountedProducts}
        filterLink="filter=discount"
        badgeStyle="discount"
        disclaimer="Эмнэлгийн зөвлөгөө биш. Мэргэжлийн эмчид хандана уу."
    />

    <CategoryGrid />

    <BenefitsSection />

    <CTASection
        title="Чанартай витамин, нэмэлт тэжээл"
        description="АНУ-ын шилдэг брэндүүдийн витамин, нэмэлт тэжээлээр эрүүл мэндээ дэмжээрэй."
        buttonText="Бүх бүтээгдэхүүн"
        buttonLink="/products"
    />
</Layout>
