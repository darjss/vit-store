---



import UserProfile from "@/components/auth/UserProfile.astro";
import CartButton from "@/components/cart/cart-button";
import SidebarContent from "@/components/SidebarContent.astro";
import SearchOverlay from "@/components/search/search-overlay";
import { Sheet, SheetContent, SheetTrigger } from "@/components/starwind/sheet";
import IconMenu from "~icons/ri/menu-line";
import IconUser from "~icons/ri/user-line";
---

<header
    class="sticky top-0 z-50 border-b-2 border-border bg-background/95 backdrop-blur" transition:persist transition:name="header"
>
    <div class="mx-auto max-w-screen-2xl px-5 py-3 lg:px-8 lg:py-4">
        <div class="flex items-center justify-between gap-3 lg:gap-4">
            <Sheet>
                <SheetTrigger class="p-2 border-2 border-border bg-card shadow-hard-sm active:translate-x-px active:translate-y-px active:shadow-none transition-all">
                    <IconMenu class="w-6 h-6" />
                    <span class="sr-only">Toggle menu</span>
                </SheetTrigger>
                <SheetContent side="left" class="w-[300px] sm:w-[400px] border-r-2 border-border p-0">
                    <div class="h-full overflow-y-auto bg-background">
                        <SidebarContent />
                    </div>
                </SheetContent>
            </Sheet>
            <div class="flex min-w-0 items-center gap-2 w-full">
                <a href="/" class="flex min-w-0 items-center gap-2.5">
                    <div class="h-10 w-10 shrink-0 border-2 border-border bg-primary flex items-center justify-center font-black text-[11px] uppercase tracking-wider shadow-hard-sm">
                        AV
                    </div>
                    <div class="min-w-0">
                        <span class="block truncate font-black text-sm uppercase tracking-wider sm:text-base">Amerik Vitamin</span>
                        <span class="hidden sm:block text-[10px] font-semibold text-muted-foreground">АНУ-аас шууд хүргэлттэй</span>
                    </div>
                </a>
            </div>

            <div class="flex items-center gap-2.5 lg:gap-3">
                <!-- Search Button - triggers SearchOverlay -->
                <div class="hidden sm:block">
                    <SearchOverlay client:idle />
                </div>

                <UserProfile server:defer>
                    <div
                        slot="fallback"
                        aria-label="Профайл"
                        class="flex items-center justify-center w-9 h-9 border-2 border-border bg-card shadow-hard-sm"
                    >
                        <IconUser class="w-4 h-4" />
                    </div>
                </UserProfile>
                
                
                <div class="hidden md:block">
                    <CartButton client:idle />
                </div>
            </div>
        </div>
    </div>
</header>
