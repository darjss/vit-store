{
  "kind": "cloudflare::D1Database",
  "id": "database",
  "fqn": "vit-store/darjs/database",
  "seq": 1,
  "data": {},
  "status": "updated",
  "output": {
    "Symbol(alchemy::ResourceKind)": "cloudflare::D1Database",
    "Symbol(alchemy::ResourceID)": "database",
    "Symbol(alchemy::ResourceFQN)": "vit-store/darjs/database",
    "Symbol(alchemy::ResourceScope)": {
      "@scope": null
    },
    "Symbol(alchemy::ResourceSeq)": 1,
    "type": "d1",
    "id": "",
    "name": "vit-store-database-darjs",
    "migrationsDir": "apps/server/src/db/migrations",
    "migrationsTable": "d1_migrations",
    "dev": {
      "id": "database",
      "remote": false
    }
  },
  "props": {
    "migrationsDir": "apps/server/src/db/migrations",
    "migrationsFiles": [
      {
        "id": "0000_strange_hairball.sql",
        "sql": "CREATE TABLE `ecom_vit_brand` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`name` text(256) NOT NULL,\n\t`logo_url` text(512),\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer\n);\n--> statement-breakpoint\nCREATE UNIQUE INDEX `ecom_vit_brand_name_unique` ON `ecom_vit_brand` (`name`);--> statement-breakpoint\nCREATE INDEX `brand_name_idx` ON `ecom_vit_brand` (`name`);--> statement-breakpoint\nCREATE INDEX `brand_created_at_idx` ON `ecom_vit_brand` (`created_at`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_cart_item` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`cart_id` integer NOT NULL,\n\t`product_variant_id` integer NOT NULL,\n\t`quantity` integer NOT NULL,\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer,\n\tFOREIGN KEY (`cart_id`) REFERENCES `ecom_vit_cart`(`id`) ON UPDATE no action ON DELETE cascade,\n\tFOREIGN KEY (`product_variant_id`) REFERENCES `ecom_vit_product`(`id`) ON UPDATE no action ON DELETE no action\n);\n--> statement-breakpoint\nCREATE INDEX `cart_item_cart_idx` ON `ecom_vit_cart_item` (`cart_id`);--> statement-breakpoint\nCREATE INDEX `cart_item_product_idx` ON `ecom_vit_cart_item` (`product_variant_id`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_cart` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`customer_id` integer NOT NULL,\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer,\n\tFOREIGN KEY (`customer_id`) REFERENCES `ecom_vit_customer`(`phone`) ON UPDATE no action ON DELETE no action\n);\n--> statement-breakpoint\nCREATE INDEX `cart_customer_idx` ON `ecom_vit_cart` (`customer_id`);--> statement-breakpoint\nCREATE INDEX `cart_created_at_idx` ON `ecom_vit_cart` (`created_at`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_category` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`name` text(256) NOT NULL,\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer\n);\n--> statement-breakpoint\nCREATE UNIQUE INDEX `ecom_vit_category_name_unique` ON `ecom_vit_category` (`name`);--> statement-breakpoint\nCREATE INDEX `category_name_idx` ON `ecom_vit_category` (`name`);--> statement-breakpoint\nCREATE INDEX `category_created_at_idx` ON `ecom_vit_category` (`created_at`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_customer` (\n\t`phone` integer PRIMARY KEY NOT NULL,\n\t`address` text(256),\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer\n);\n--> statement-breakpoint\nCREATE UNIQUE INDEX `ecom_vit_customer_phone_unique` ON `ecom_vit_customer` (`phone`);--> statement-breakpoint\nCREATE INDEX `phone_idx` ON `ecom_vit_customer` (`phone`);--> statement-breakpoint\nCREATE INDEX `customer_created_at_idx` ON `ecom_vit_customer` (`created_at`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_order_detail` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`order_id` integer NOT NULL,\n\t`product_id` integer NOT NULL,\n\t`quantity` integer NOT NULL,\n\tFOREIGN KEY (`order_id`) REFERENCES `ecom_vit_order`(`id`) ON UPDATE no action ON DELETE cascade,\n\tFOREIGN KEY (`product_id`) REFERENCES `ecom_vit_product`(`id`) ON UPDATE no action ON DELETE no action\n);\n--> statement-breakpoint\nCREATE INDEX `detail_order_idx` ON `ecom_vit_order_detail` (`order_id`);--> statement-breakpoint\nCREATE INDEX `detail_product_idx` ON `ecom_vit_order_detail` (`product_id`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_order` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`order_number` text(8) NOT NULL,\n\t`customer_phone` integer NOT NULL,\n\t`status` text NOT NULL,\n\t`address` text(256) NOT NULL,\n\t`delivery_provider` text NOT NULL,\n\t`total` integer NOT NULL,\n\t`notes` text,\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer,\n\tFOREIGN KEY (`customer_phone`) REFERENCES `ecom_vit_customer`(`phone`) ON UPDATE no action ON DELETE no action\n);\n--> statement-breakpoint\nCREATE INDEX `order_id_idx` ON `ecom_vit_order` (`id`);--> statement-breakpoint\nCREATE INDEX `order_customer_idx` ON `ecom_vit_order` (`customer_phone`);--> statement-breakpoint\nCREATE INDEX `order_number_idx` ON `ecom_vit_order` (`order_number`);--> statement-breakpoint\nCREATE INDEX `order_status_idx` ON `ecom_vit_order` (`status`);--> statement-breakpoint\nCREATE INDEX `order_created_at_idx` ON `ecom_vit_order` (`created_at`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_payment` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`order_id` integer NOT NULL,\n\t`provider` text NOT NULL,\n\t`status` text NOT NULL,\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer,\n\tFOREIGN KEY (`order_id`) REFERENCES `ecom_vit_order`(`id`) ON UPDATE no action ON DELETE no action\n);\n--> statement-breakpoint\nCREATE INDEX `payment_order_idx` ON `ecom_vit_payment` (`order_id`);--> statement-breakpoint\nCREATE INDEX `payment_status_idx` ON `ecom_vit_payment` (`status`);--> statement-breakpoint\nCREATE INDEX `payment_created_at_idx` ON `ecom_vit_payment` (`created_at`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_product_image` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`product_id` integer NOT NULL,\n\t`url` text(512) NOT NULL,\n\t`is_primary` integer DEFAULT 0 NOT NULL,\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\tFOREIGN KEY (`product_id`) REFERENCES `ecom_vit_product`(`id`) ON UPDATE no action ON DELETE cascade\n);\n--> statement-breakpoint\nCREATE INDEX `image_product_idx` ON `ecom_vit_product_image` (`product_id`);--> statement-breakpoint\nCREATE INDEX `image_product_primary_idx` ON `ecom_vit_product_image` (`product_id`,`is_primary`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_product` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`name` text(256) NOT NULL,\n\t`slug` text(256) NOT NULL,\n\t`description` text NOT NULL,\n\t`status` text DEFAULT 'draft' NOT NULL,\n\t`discount` integer DEFAULT 0 NOT NULL,\n\t`amount` text(15) NOT NULL,\n\t`potency` text(10) NOT NULL,\n\t`stock` integer DEFAULT 0 NOT NULL,\n\t`price` integer NOT NULL,\n\t`daily_intake` integer DEFAULT 0 NOT NULL,\n\t`category_id` integer NOT NULL,\n\t`brand_id` integer NOT NULL,\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer,\n\tFOREIGN KEY (`category_id`) REFERENCES `ecom_vit_category`(`id`) ON UPDATE no action ON DELETE no action,\n\tFOREIGN KEY (`brand_id`) REFERENCES `ecom_vit_brand`(`id`) ON UPDATE no action ON DELETE no action\n);\n--> statement-breakpoint\nCREATE UNIQUE INDEX `ecom_vit_product_slug_unique` ON `ecom_vit_product` (`slug`);--> statement-breakpoint\nCREATE INDEX `product_id_idx` ON `ecom_vit_product` (`id`);--> statement-breakpoint\nCREATE INDEX `product_name_idx` ON `ecom_vit_product` (`name`);--> statement-breakpoint\nCREATE INDEX `product_status_idx` ON `ecom_vit_product` (`status`);--> statement-breakpoint\nCREATE INDEX `product_category_idx` ON `ecom_vit_product` (`category_id`);--> statement-breakpoint\nCREATE INDEX `product_brand_idx` ON `ecom_vit_product` (`brand_id`);--> statement-breakpoint\nCREATE INDEX `product_stock_idx` ON `ecom_vit_product` (`stock`);--> statement-breakpoint\nCREATE INDEX `product_price_idx` ON `ecom_vit_product` (`price`);--> statement-breakpoint\nCREATE INDEX `product_created_at_idx` ON `ecom_vit_product` (`created_at`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_purchase` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`product_id` integer NOT NULL,\n\t`quantity_purchased` integer NOT NULL,\n\t`unit_cost` integer NOT NULL,\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer,\n\tFOREIGN KEY (`product_id`) REFERENCES `ecom_vit_product`(`id`) ON UPDATE no action ON DELETE no action\n);\n--> statement-breakpoint\nCREATE INDEX `purchase_id_idx` ON `ecom_vit_purchase` (`id`);--> statement-breakpoint\nCREATE INDEX `purchase_product_idx` ON `ecom_vit_purchase` (`product_id`);--> statement-breakpoint\nCREATE INDEX `purchase_created_idx` ON `ecom_vit_purchase` (`created_at`);--> statement-breakpoint\nCREATE INDEX `purchase_product_created_idx` ON `ecom_vit_purchase` (`product_id`,`created_at`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_sales` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`product_id` integer NOT NULL,\n\t`order_id` integer NOT NULL,\n\t`quantity_sold` integer NOT NULL,\n\t`product_cost` integer NOT NULL,\n\t`selling_price` integer NOT NULL,\n\t`discount_applied` integer DEFAULT 0,\n\t`created_at` integer DEFAULT (unixepoch()),\n\t`updated_at` integer,\n\tFOREIGN KEY (`product_id`) REFERENCES `ecom_vit_product`(`id`) ON UPDATE no action ON DELETE no action,\n\tFOREIGN KEY (`order_id`) REFERENCES `ecom_vit_order`(`id`) ON UPDATE no action ON DELETE no action\n);\n--> statement-breakpoint\nCREATE INDEX `sales_product_idx` ON `ecom_vit_sales` (`product_id`);--> statement-breakpoint\nCREATE INDEX `sales_created_at_idx` ON `ecom_vit_sales` (`created_at`);--> statement-breakpoint\nCREATE INDEX `sales_product_created_idx` ON `ecom_vit_sales` (`product_id`,`created_at`);--> statement-breakpoint\nCREATE TABLE `ecom_vit_user` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`username` text(256) NOT NULL,\n\t`google_id` text(256),\n\t`is_approved` integer DEFAULT false NOT NULL,\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer\n);\n--> statement-breakpoint\nCREATE UNIQUE INDEX `ecom_vit_user_google_id_unique` ON `ecom_vit_user` (`google_id`);--> statement-breakpoint\nCREATE INDEX `username_idx` ON `ecom_vit_user` (`username`);--> statement-breakpoint\nCREATE INDEX `google_id_idx` ON `ecom_vit_user` (`google_id`);--> statement-breakpoint\nCREATE INDEX `user_created_at_idx` ON `ecom_vit_user` (`created_at`);"
      },
      {
        "id": "0001_colorful_juggernaut.sql",
        "sql": "PRAGMA foreign_keys=OFF;--> statement-breakpoint\nCREATE TABLE `__new_ecom_vit_brand` (\n\t`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,\n\t`name` text(256) NOT NULL,\n\t`logo_url` text(512) NOT NULL,\n\t`created_at` integer DEFAULT (unixepoch()) NOT NULL,\n\t`updated_at` integer\n);\n--> statement-breakpoint\nINSERT INTO `__new_ecom_vit_brand`(\"id\", \"name\", \"logo_url\", \"created_at\", \"updated_at\") SELECT \"id\", \"name\", \"logo_url\", \"created_at\", \"updated_at\" FROM `ecom_vit_brand`;--> statement-breakpoint\nDROP TABLE `ecom_vit_brand`;--> statement-breakpoint\nALTER TABLE `__new_ecom_vit_brand` RENAME TO `ecom_vit_brand`;--> statement-breakpoint\nPRAGMA foreign_keys=ON;--> statement-breakpoint\nCREATE UNIQUE INDEX `ecom_vit_brand_name_unique` ON `ecom_vit_brand` (`name`);--> statement-breakpoint\nCREATE INDEX `brand_name_idx` ON `ecom_vit_brand` (`name`);--> statement-breakpoint\nCREATE INDEX `brand_created_at_idx` ON `ecom_vit_brand` (`created_at`);"
      }
    ],
    "dev": {
      "force": 1759458711121
    }
  }
}